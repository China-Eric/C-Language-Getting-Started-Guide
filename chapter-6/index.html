
<!DOCTYPE html>
<html>
<head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>第六章 数据类型 &mdash; C Language Getting Started Guide</title>

    <link rel="shortcut icon" href="../img/favicon.ico">
    <link rel="stylesheet" href="../css/alabaster.css" type="text/css">
    <link rel="stylesheet" href="../css/alabaster-overrides.css" type="text/css">

    

    

    

    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

    
  
</head>
<body>

  <div class="document">
    <div class="documentwrapper">
      <div class="bodywrapper">
        <div class="body" role="main">
          
            <h1 id="_1">数据类型<a class="headerlink" href="#_1" title="Permanent link">¶</a></h1>
<p><img alt="1" src="../img/chapter-6/1.png" /></p>
<p>在C语言中分为两中数据类型：</p>
<ol>
<li>基本数据类型；</li>
<li>构造数据类型，把基本数据类型进行封装，变成一个新的数据类型；</li>
</ol>
<h2 id="_2">整型<a class="headerlink" href="#_2" title="Permanent link">¶</a></h2>
<h3 id="_3">整型常量<a class="headerlink" href="#_3" title="Permanent link">¶</a></h3>
<ul>
<li>十进制常数</li>
</ul>
<pre><code class="c">int x = 123;  // 正数
int y = -123;  // 负数
</code></pre>

<ul>
<li>八进制</li>
</ul>
<p>以0为前缀</p>
<pre><code class="c">int x = 01234567;  // 正数
int y = -01234567;  // 负数
</code></pre>

<ul>
<li>16进制</li>
</ul>
<p>以0X或者0x为前缀，不区分大小写</p>
<pre><code class="c">int x = 0xFE;  // 正数
int y = -0XFE;  // 负数
</code></pre>

<ul>
<li>后缀</li>
</ul>
<p><code>L</code>和<code>U</code>不区分大小写</p>
<pre><code class="c">int x = 100L;  // 长整型
int y = 100U;  // 无符号
int z = 100UL;// 混合
</code></pre>

<h3 id="_4">整型变量<a class="headerlink" href="#_4" title="Permanent link">¶</a></h3>
<ul>
<li>声明和定义</li>
</ul>
<pre><code class="c">int i;  // 声明
i = 10;  // 定义
</code></pre>

<table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">描述</th>
<th align="left">所占字节</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>short</code></td>
<td align="left">短整型</td>
<td align="left">2</td>
</tr>
<tr>
<td align="left"><code>int</code></td>
<td align="left">整型</td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>long</code></td>
<td align="left">长整型</td>
<td align="left">8</td>
</tr>
<tr>
<td align="left"><code>long long</code></td>
<td align="left">更长的长整型</td>
<td align="left">8</td>
</tr>
<tr>
<td align="left"><code>signed</code></td>
<td align="left">有符号数</td>
<td align="left">4</td>
</tr>
<tr>
<td align="left"><code>unsigned</code></td>
<td align="left">无符号数</td>
<td align="left">4</td>
</tr>
</tbody>
</table>
<pre><code class="c">#include &lt;stdio.h&gt;

int main(void)
{
    printf(&quot;%d \n&quot;, sizeof(short));
    printf(&quot;%d \n&quot;, sizeof(int));
    printf(&quot;%d \n&quot;, sizeof(long));
    printf(&quot;%d \n&quot;, sizeof(long long));
    printf(&quot;%d \n&quot;, sizeof(signed));
    printf(&quot;%d \n&quot;, sizeof(unsigned));
    return 0;
}
</code></pre>

<blockquote>
<p>不同的编译器环境下结果可能不一样，这里使用的是<code>cldeblocks</code>+<code>gcc</code></p>
</blockquote>
<ul>
<li>默认的缺省值</li>
</ul>
<pre><code class="c">int as;  // unsigned int as
long la;  // long int la
unsigned long ula;  // unsigned long int ula
short sa;  // signed short int sa
unsigned short usa;  // unsigned short int usa
long long lla;  // long long int lla
unsigned long long ulla;  // unsigned long long int ulla
</code></pre>

<p><strong>变量与数据对象</strong></p>
<ol>
<li>变量的本质：一块连续的存储单元（内存、寄存器），不一定有地址；</li>
<li>变量有名字，用来表示存储单元（左值）或存储单元的内容（右值）；</li>
<li>数据对象没有名字，是一种具有数据类型的连续存储单元；</li>
</ol>
<pre><code class="c">int x = y;
// x == 左值
// y == 右值
// 把变量y的内容赋值给x
</code></pre>

<blockquote>
<p>常量只能当右值</p>
</blockquote>
<h3 id="_5">整型数据的溢出<a class="headerlink" href="#_5" title="Permanent link">¶</a></h3>
<ul>
<li>整数数据的表示范围</li>
</ul>
<pre><code class="c">#include &lt;stdio.h&gt;
#include &lt;limits.h&gt;

int main(void)
{
    printf(&quot;%d \n&quot;, INT_MAX);  // INT类型所占空间最大值
    printf(&quot;%d \n&quot;, INT_MIN);  // INT类型所占空间最小值
    return 0;
}
</code></pre>

<pre><code class="bash">$ ./hello 
2147483647 
-2147483648
</code></pre>

<ul>
<li>整数数据的溢出</li>
</ul>
<p>在计算过程中超出的数据的表示范围会导致溢出</p>
<pre><code class="c">#include &lt;stdio.h&gt;
#include &lt;limits.h&gt;

int main(void)
{
    printf(&quot;%d \n&quot;, INT_MAX + 1);  // INT类型所占空间最大值+1
    printf(&quot;%d \n&quot;, INT_MIN - 1);  // INT类型所占空间最小值-1
    return 0;
}
</code></pre>

<pre><code class="bash">$ ./hello 
-2147483648 
2147483647
</code></pre>

<p>当溢出之后，最大值和最小值的将会交换。</p>
<h2 id="_6">字符型<a class="headerlink" href="#_6" title="Permanent link">¶</a></h2>
<h3 id="ascii">ASCII码<a class="headerlink" href="#ascii" title="Permanent link">¶</a></h3>
<p><code>ASCII（American Standard Code for Information Interchange，美国信息交换标准代码）</code>是基于拉丁字母的一套电脑编码系统，主要用于显示现代英语和其他西欧语言。</p>
<blockquote>
<p>ASCII是American Standard Code for Information Interchange缩写，而不是ASCⅡ(罗马数字2)</p>
</blockquote>
<p><img alt="2" src="../img/chapter-6/02.jpg" /></p>
<ul>
<li>标准ASCII码分类</li>
</ul>
<p>0-31是控制字符或通信专用字符（不可显示），32-126是可显示字符，包括数字、字母标点符号等。</p>
<h3 id="_7">字符常量<a class="headerlink" href="#_7" title="Permanent link">¶</a></h3>
<ul>
<li>字符常量</li>
</ul>
<p>字符型数据在内存中以<code>ASCII码</code>形式进行存储，使用单引号引起来，如： <code>'A'</code>、<code>'*'</code></p>
<pre><code class="c">#include &lt;stdio.h&gt;

int main(void)
{
    char ch = 'A';  // ==&gt; char ch = 65;
    printf(&quot;%c \n&quot;, ch);  // 以字符的方式进行输出
    printf(&quot;%d \n&quot;, ch);  // 以十进制的方式进行输出
    return 0;
}
</code></pre>

<pre><code class="bash">$ ./hello 
A 
65
</code></pre>

<ul>
<li>分类</li>
</ul>
<p>普通字符变量和转义字符，其中转义字符又分为：</p>
<ol>
<li>制表符：<code>\t</code></li>
<li>回车符： <code>\r</code>光标往后移动一格</li>
<li>换行符： <code>\n</code></li>
</ol>
<pre><code class="c">#include &lt;stdio.h&gt;

int main(void)
{
    char ch = 'A', c = 65;
    printf(&quot;%c\t%c\n&quot;, ch, c);  // 制表符，换行符
    printf(&quot;%c\r%c\n&quot;, ch, c);  // 回车符，换行符
    return 0;
}
</code></pre>

<pre><code class="c">$ ./hello 
A   A
A
</code></pre>

<h3 id="_8">字符变量<a class="headerlink" href="#_8" title="Permanent link">¶</a></h3>
<ul>
<li>声明和定义</li>
</ul>
<p>每个变量分配一个字节，允许对变量赋整数值，低8位赋值给字符变量，高位截断丢弃。</p>
<pre><code class="c">char ch;
ch = 65; // ASCII 65 == A
printf(&quot;%c\n&quot;, ch);
return 0;
</code></pre>

<ul>
<li>字符和整数之间可以直接进行数值运算</li>
</ul>
<p>直接将字符<code>ASCII值</code>与整数进行运算</p>
<p>当右值运算时，存在整数提升，先转换成：char--&gt;int</p>
<p>与浮点型运算，转换顺序：char--&gt;int--&gt;float</p>
<pre><code class="c">#include &lt;stdio.h&gt;

int main(void)
{
    char ch = 'A';  // A ==&gt; 65
    printf(&quot;%d\n&quot;, ch + 1);  // 65 + 1 = 66
    return 0;
}
</code></pre>

<pre><code class="bash">$ ./hello 
66
</code></pre>

<h3 id="_9">字符的输入与输出<a class="headerlink" href="#_9" title="Permanent link">¶</a></h3>
<p><code>%d</code>格式打印，<code>%c</code>格式打印</p>
<ul>
<li>printf函数在打印char时做了什么</li>
</ul>
<p>一个字符可以以<code>%d</code>和<code>%c</code>的形式输出，printf函数接受的无论是<code>%d</code>还是<code>%c</code>，参数都会被转成<code>int</code>类型。</p>
<pre><code class="c">#include &lt;stdio.h&gt;

int main(void)
{
    char ch = 'A';  // A ==&gt; 65
    printf(&quot;%d\n&quot;, ch);
    printf(&quot;%c\n&quot;, ch);
    return 0;
}
</code></pre>

<pre><code class="c">$ ./hello 
65
A
</code></pre>

<ul>
<li>scanf格式输入需要注意的地方</li>
</ul>
<p><code>%c</code>只接受一个字符，其余的丢弃，<code>%d</code>接收数据转换为二进制，存放在变量起始的连续四个存储单元中。</p>
<pre><code class="c">#include &lt;stdio.h&gt;

int main(void)
{
    char ch;
    printf(&quot;请输入一个ASCII字符：&quot;);
    scanf(&quot;%c&quot;,&amp;ch);
    printf(&quot;%d\n&quot;, ch);
    printf(&quot;%c\n&quot;, ch);
    return 0;
}
</code></pre>

<pre><code class="bash">$ ./hello 
请输入一个ASCII字符：A
65
A
</code></pre>

<h2 id="_10">浮点型<a class="headerlink" href="#_10" title="Permanent link">¶</a></h2>
<p>可接近表示任意实数</p>
<p><img alt="3" src="../img/chapter-6/3.png" /></p>
<p><strong>浮点型数据分类</strong></p>
<ul>
<li>float</li>
<li>double</li>
<li>long double</li>
</ul>
<pre><code class="c">float f;  // 声明
f = 12.04;  // 定义
printf(&quot;%f\n&quot;, f);  // 输出
</code></pre>

<p>浮点型数据存储，浮点数全都是有符号数</p>
<p><img alt="4" src="../img/chapter-6/4.png" /></p>
<ul>
<li>浮点数比较大小</li>
</ul>
<pre><code class="c">#define EPSILON 1E-6
if(abs(df1 - df2)&lt;EPSILON)
    printf(&quot;df1=df2\n&quot;)
</code></pre>

<h2 id="_11">类型转换<a class="headerlink" href="#_11" title="Permanent link">¶</a></h2>
<p>当我们在进行运算，左边和右边的值类型不一样时就需要用到类型转换了。</p>
<h3 id="_12">隐式转换<a class="headerlink" href="#_12" title="Permanent link">¶</a></h3>
<p>当发生隐式转换的时候，编译器会自动帮我们转换。</p>
<p><strong>什么时候发生隐式转换</strong></p>
<ol>
<li>当算术或逻辑表达式中操作数类型不相同；</li>
<li>当赋值运算符两侧类型不匹配；</li>
<li>函数调用过程中形参、实参不匹配；</li>
<li>当return语句表达式类型与函数返回类型不匹配；</li>
</ol>
<pre><code class="c">#include &lt;stdio.h&gt;

int test(void)  //  test函数要求返回整型
{
    return 1.1;  // 实际返回浮点型
}

int main(void)
{
    int i;
    i = test();  // 赋值运算
    printf(&quot;%d\n&quot;,i);  // 实际赋值的是整形1
    return 0;
}
</code></pre>

<pre><code class="bash">$ ./hello 
1
</code></pre>

<p><strong>算术运算转换规则</strong></p>
<ul>
<li>空间占用小的数据转换为空间大的数据<ol>
<li>浮点数：<code>float</code> --&gt; <code>double</code> --&gt; <code>long double</code></li>
<li>整数：<code>char</code> --&gt; <code>int</code> --&gt; <code>unsigned</code> --&gt; <code>long</code> --&gt; <code>unsigned long</code> --&gt; <code>long long</code></li>
</ol>
</li>
<li>转换规则<ul>
<li>在C99中，可以将任何等级低于<code>int</code>或<code>unsigned</code>的类型转换到此类型，运行结束后转换。比如char</li>
<li>如果连个书都没有浮点数，首先要将两个操作数整数提升<ol>
<li>如果两个数都是无符号类型或者有符号类型，将等级较低的转换为等级较高的；</li>
<li>如果无符号数等级高于有符号数，将有符号数转换为无符号数类型；</li>
<li>如果有符号数类型可以表示无符号数类型的所有值，将无符号数转换为有符号数类型；</li>
<li>否则，将两个操作数都转换为与有符号数的类型相对于的无符号数；</li>
</ol>
</li>
</ul>
</li>
<li>转换等级<ol>
<li>long long、unsigned long long;</li>
<li>long、unsigned long；</li>
<li>int、unsigend int；</li>
<li>short、unsigned short；</li>
<li>char、unsigned char；</li>
<li>_Bool；</li>
</ol>
</li>
</ul>
<p><strong>赋值运算转换规则</strong></p>
<ul>
<li>字符转换为整型：高位补零；</li>
<li>整型转换为字符型：截断；</li>
<li>整型转换为浮点型：添加小数位；</li>
<li>浮点型转换为整型：截断小数位；</li>
<li>字符型转换为浮点型（中间经过整型）<ul>
<li>先提升为整型，然后再添加小数位；</li>
</ul>
</li>
<li>浮点型转换为字符型（中间经过整型）<ul>
<li>截断小数位，然后截断</li>
</ul>
</li>
</ul>
<h3 id="_13">强制转换<a class="headerlink" href="#_13" title="Permanent link">¶</a></h3>
<p>程序员在程序中用强制运算符转换</p>
<pre><code class="c">#include &lt;stdio.h&gt;

int main(void)
{
    char ch = (int)65.1415926;
    printf(&quot;%c\n&quot;, ch);
    return 0;
}
</code></pre>

<p>转换的是值，而不是变量的类型，类型是不会改变的。</p>
<pre><code class="c">$ ./hello 
A
</code></pre>

<h2 id="c99">C99新增类型<a class="headerlink" href="#c99" title="Permanent link">¶</a></h2>
<p><code>C99标准</code>新增加的数据类型</p>
<h3 id="_bool">布尔类型（_Bool）<a class="headerlink" href="#_bool" title="Permanent link">¶</a></h3>
<p>布尔类型中，其值只能是<code>0</code>或者<code>1</code>，<code>0</code>为<code>false</code>，其他数值均为<code>true</code></p>
<pre><code class="c">#include &lt;stdio.h&gt;

int main(void)
{
    _Bool a = 0;
    _Bool b = 99;
    printf(&quot;%d \n&quot;, a);
    printf(&quot;%d \n&quot;, b);
    if(a)
        printf(&quot;true&quot;);
    if(b)
        printf(&quot;true&quot;);
    return 0;
}
</code></pre>

<pre><code class="bash">$ ./hello 
0 
1 
true
</code></pre>

<p>C语言特意弄了个头文件，让我们定义布尔值和其他语言一样，使用<code>bool</code>定义而不是<code>_Bool</code></p>
<pre><code class="c">#include &lt;stdio.h&gt;
#include &lt;stdbool.h&gt;

int main(void)
{
    bool a = 0;
    bool b = 99;
    printf(&quot;%d\n&quot;,true);
    printf(&quot;%d\n&quot;,false);
    return 0;
}
</code></pre>

<p>在头文件中，你可以看到下面的源码，帮你定义了布尔类型：</p>
<pre><code class="c">#define bool    _Bool
#define true    1
#define false   0
</code></pre>

<h3 id="_complex">复数类型(_Complex)<a class="headerlink" href="#_complex" title="Permanent link">¶</a></h3>
<ul>
<li>半个关键字，需要与其他类型的关键字组合<ol>
<li>float _Complex</li>
<li>double _Complex</li>
<li>long double _Complex</li>
</ol>
</li>
</ul>
<pre><code class="c">#include &lt;stdio.h&gt;
#include &lt;complex.h&gt;
#include &lt;stdlib.h&gt;

int main(void)
{
    double complex dc1 = 1.5 + 7.2 * I;
    double complex dc2 = 3.2 + 8.1 * I;
    double complex dc3 = dc1 + dc2;
    printf(&quot;%lf + %lfi\n&quot;,creal(dc3), cimag(dc3));

    return 0;
}
</code></pre>
            
          
        </div>
      </div>
    </div>
    <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
      <div class="sphinxsidebarwrapper">
        
  <p class="logo">
    <a href="..">
      <img class="logo" src="../logo.png" title="C Language Getting Started Guide">
    </a>
  </p>
  



        
          



<h3>Table Of Contents</h3>

<nav>
  
  
    <ul>
    
      <li><a href="#_2">整型</a></li>
      <ul>
    
      <li><a href="#_3">整型常量</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#_4">整型变量</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#_5">整型数据的溢出</a></li>
      <ul>
    
  </ul>
    
  </ul>
    
      <li><a href="#_6">字符型</a></li>
      <ul>
    
      <li><a href="#ascii">ASCII码</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#_7">字符常量</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#_8">字符变量</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#_9">字符的输入与输出</a></li>
      <ul>
    
  </ul>
    
  </ul>
    
      <li><a href="#_10">浮点型</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#_11">类型转换</a></li>
      <ul>
    
      <li><a href="#_12">隐式转换</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#_13">强制转换</a></li>
      <ul>
    
  </ul>
    
  </ul>
    
      <li><a href="#c99">C99新增类型</a></li>
      <ul>
    
      <li><a href="#_bool">布尔类型（_Bool）</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#_complex">复数类型(_Complex)</a></li>
      <ul>
    
  </ul>
    
  </ul>
    
  </ul>
  

  
    <hr>
    <ul>
      
        <li class="toctree-l1"><a href="https://github.com/anshengme/C-Language-Getting-Started-Guide">Fork me on GitHub</a></li>
      
    </ul>
  
</nav>
          
  <h3>Related Topics</h3>
  <ul>
    
      <li>Previous: <a href="../chapter-5/" title="previous chapter">
        第五章 进制
      </a></li>
    
    
      <li>Next: <a href="../chapter-7/" title="next chapter">
        第七章 运算符与表达式
      </a></li>
    
  </ul>

        
        <div id="searchbox" style="display: none;" role="search">
  <h3>Quick search</h3>
  <form class="search" action="../search.html" method="get">
    <input name="q" type="text">
    <input value="Go" type="submit">
  </form>
  <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
  </p>
</div>
<script type="text/javascript">
  document.getElementById("searchbox").style.display = "block";
</script>
      </div>
    </div>
    <div class="clearer"></div>
  </div>

  
    <div class="footer">
      
        &copy; 2017 ansheng
      
      
        |
        Powered by <a href="http://www.mkdocs.org">MkDocs 0.16.3</a>
        &amp; <a href="https://github.com/iamale/mkdocs-alabaster">Alabaster</a>
      
    </div>
  

  <!--
  MkDocs version      : 0.16.3
  Docs Build Date UTC : 2017-09-29 04:17:58
  -->
</body>
</html>