
<!DOCTYPE html>
<html>
<head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <title>第八章 输入输出 &mdash; C Language Getting Started Guide</title>

    <link rel="shortcut icon" href="../img/favicon.ico">
    <link rel="stylesheet" href="../css/alabaster.css" type="text/css">
    <link rel="stylesheet" href="../css/alabaster-overrides.css" type="text/css">

    

    

    

    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

    
  
</head>
<body>

  <div class="document">
    <div class="documentwrapper">
      <div class="bodywrapper">
        <div class="body" role="main">
          
            <h1 id="_1">输入与输出<a class="headerlink" href="#_1" title="Permanent link">¶</a></h1>
<h2 id="printf">格式输出函数printf()<a class="headerlink" href="#printf" title="Permanent link">¶</a></h2>
<h3 id="printf_1">printf()函数的使用<a class="headerlink" href="#printf_1" title="Permanent link">¶</a></h3>
<ul>
<li>库函数使用<ul>
<li>在头文件中导入<code>#include &lt;stdio.h&gt;</code>库，然后直接使用；</li>
<li>printf("控制字符串", 输出列表);</li>
<li>控制字符串：普通字符串和转格式说明</li>
</ul>
</li>
</ul>
<p>一个最简单的<code>Hello, World!</code></p>
<pre><code class="c">#include &lt;stdio.h&gt;  // printf就是在和这个头文件中定义的

int main(void)
{
    printf(&quot;Hello, World!&quot;);
    return 0;
}
</code></pre>

<ul>
<li>printf家族<ol>
<li>printf、fprintf、sprintf、snprintf</li>
<li>vsnprintf</li>
</ol>
</li>
</ul>
<h3 id="_2">输出格式说明<a class="headerlink" href="#_2" title="Permanent link">¶</a></h3>
<ul>
<li>控制字符<ul>
<li>转义字符：<code>\r</code>、<code>\n</code>、<code>\a</code>、<code>\t</code></li>
</ul>
</li>
<li>
<p><code>%[标志][输出宽度][.精度][长度]类型</code></p>
<ul>
<li>其中<code>[]</code>是可选项</li>
<li>标志：表述输出数据的特征，比如正负、空格；</li>
<li>输出宽度： 输出固定的宽度位数，不足的位数使用空格或者0填充；</li>
<li>精度：以<code>.</code>开头，后跟十进制整数<ol>
<li>若输出的是数字，表示小数的位数；</li>
<li>若输出的是字符，表示输出字符的个数；</li>
<li>若实际位数大于定义的精度，超过部分将被截取，但不会改变实际变量的值；</li>
</ol>
</li>
<li>长度：分h\l两种，分别代表短整型和长整型格式输出；</li>
</ul>
</li>
<li>
<p>常见的输出控制格式</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">格式字符</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>%d</code></td>
<td align="left">以十进制形式输出由符号整数</td>
</tr>
<tr>
<td align="left"><code>%o</code></td>
<td align="left">以八进制形式输出无符号整数</td>
</tr>
<tr>
<td align="left"><code>%x,%X</code></td>
<td align="left">以16进制形式输出无符号整数</td>
</tr>
<tr>
<td align="left"><code>%u</code></td>
<td align="left">以10进制形式输出无符号整数</td>
</tr>
<tr>
<td align="left"><code>%f</code></td>
<td align="left">以小数形式输出浮点数</td>
</tr>
<tr>
<td align="left"><code>%e,%E,%g</code></td>
<td align="left">以指数形式输出浮点数</td>
</tr>
<tr>
<td align="left"><code>%c</code></td>
<td align="left">输出单个字符</td>
</tr>
<tr>
<td align="left"><code>%s</code></td>
<td align="left">输出字符串</td>
</tr>
<tr>
<td align="left"><code>%p</code></td>
<td align="left">输出指针</td>
</tr>
<tr>
<td align="left"><code>%%</code></td>
<td align="left">输出一个百分号</td>
</tr>
</tbody>
</table>
<h3 id="_3">需要注意的地方<a class="headerlink" href="#_3" title="Permanent link">¶</a></h3>
<ul>
<li>C99开始支持输出无穷数、NaN、宽字符；</li>
<li>常用的一些格式控制符<ol>
<li><code>%d</code>：用于转换输出<code>int</code>类型的数据</li>
<li><code>%hhd</code>：打印char（C99）</li>
<li><code>%u</code>：用于转换输出unsigned int\short\char</li>
<li><code>%lu</code>：unsigned long</li>
<li><code>%llu</code>：unsigned long long</li>
<li><code>%e%g</code>:指数形式浮点型数据</li>
<li><code>%a</code>：16进制浮点数(C99)</li>
<li><code>%le\%lf\%lg</code>在C99中是合法的，不会再产生未定义行为</li>
</ol>
</li>
</ul>
<h2 id="scanf">格式输入函数scanf()<a class="headerlink" href="#scanf" title="Permanent link">¶</a></h2>
<ul>
<li>调用方式<ol>
<li>scanf("控制字符串", 地址列表);</li>
<li>地址列表中，需要的参数是变量的地址；</li>
<li>通过取值运算符<code>&amp;</code>来获取变量的地址；</li>
<li>各个变量用逗号隔开，与输出控制符中的转换说明占位符一一对应；</li>
<li>scanf以回车键作为输入结束标识符；</li>
</ol>
</li>
</ul>
<pre><code class="c">#include &lt;stdio.h&gt;

int main(void)
{
    int i;
    printf(&quot;请输入一个数字: &quot;);
    scanf(&quot;%d&quot;,&amp;i);
    printf(&quot;\n你输入的数字是：%d&quot;,i);
    return 0;
}
</code></pre>

<h3 id="_4">输出控制格式<a class="headerlink" href="#_4" title="Permanent link">¶</a></h3>
<pre><code>%[*][输入数据宽度][长度]类型
</code></pre>

<ul>
<li><strong>[*]：</strong> 表示该输入项读入后不赋值给相应变量；</li>
<li><strong>宽度：</strong> 输入的最大十进制宽度</li>
<li><strong>长度：</strong> 格式分为l和h，表示长整型、双精度、短整型；</li>
<li><strong>类型</strong><ol>
<li><code>%d</code> 输出十进制数</li>
<li><code>%o</code> 输出八进制数</li>
<li><code>%x</code> 输出16进制数</li>
<li><code>%c</code> 输出单个字符</li>
<li><code>%s</code> 输出字符串</li>
<li><code>%f/e</code> 输出浮点型数</li>
</ol>
</li>
</ul>
<h2 id="_5">字符输入输出函数<a class="headerlink" href="#_5" title="Permanent link">¶</a></h2>
<ul>
<li>
<p>字符输出函数：putchar()</p>
</li>
<li>
<p>字符输入函数：getchar()</p>
</li>
</ul>
<pre><code class="c">#include &lt;stdio.h&gt;

int main(void)
{
    char ch;
    ch = getchar();
    putchar(ch);
    putchar('\n');
    // putchar(getchar());
    return 0;
}
</code></pre>

<h3 id="_6">需要注意的地方<a class="headerlink" href="#_6" title="Permanent link">¶</a></h3>
<ul>
<li><code>getchar</code>是从标准输入<code>stdin</code>中读取一个字符；<ol>
<li><code>getch()</code>非缓冲输入，是直接从键盘读取一个字符；</li>
<li><code>getchar()</code>会等到回车后从stdin中读取一个字符，下次如果stdin缓存区不空的话会继续读取；</li>
<li>该函数有时会放在末尾，从缓冲区读走一个字符，清空缓冲区。也可以使用下面的方式清除回车；</li>
<li><code>getchar</code>只接受单个字符，输入数字也按字符处理，输出多个字符时，只接受第一个字符。</li>
</ol>
</li>
<li>使用<code>getchar</code>要注意优先级的问题<ol>
<li><code>while(（ch = getchar()） != '\n')</code></li>
</ol>
</li>
<li>函数<code>getchar()</code>返回值类型是一个整型<ol>
<li>确保返回值在ch表示的范围内</li>
<li><code>(ch=getchar()) != EOF</code></li>
</ol>
</li>
</ul>
<pre><code class="c">#include &lt;stdio.h&gt;

int main(void)
{
    char ch;
    int i;
    scanf(&quot;%d&quot;, &amp;i);
    printf(&quot;%d\n&quot;,i);
    fflush(stdin); // 清空缓冲区
    ch = getchar();
    putchar(ch);

    putchar('\n');
    return 0;
}
</code></pre>

<h2 id="_7">字符串输入输出函数<a class="headerlink" href="#_7" title="Permanent link">¶</a></h2>
<p>输出函数<code>puts()</code>，输入函数<code>gets()</code></p>
<pre><code class="c">#include &lt;stdio.h&gt;

int main(void)
{

    char str[50];
    gets(str);
    puts(str);

    puts(&quot;Hello, World!&quot;); // 输出，自动添加换行
    return 0;
}
</code></pre>

<h3 id="printfio">与printf函数、字符I/O函数的比较<a class="headerlink" href="#printfio" title="Permanent link">¶</a></h3>
<ul>
<li>
<p>字符串结束判断</p>
<ol>
<li><code>scanf</code>函数读取字符串时以空格、Tab或enter键结束，但此时空格和回车还停留在缓冲区，会影响后面的输入。</li>
<li>gets函数以enter键结束，可以读取有空格的字符串，而且此时回车符没有停留在缓冲区，被转换为字符串结束表示<code>\O</code>保存在字符串中。</li>
</ol>
</li>
<li>
<p>函数<code>puts</code>相比<code>printf</code>会自动换行</p>
<ol>
<li><code>puts</code>打印字符串时，会自动将字符串结束表示<code>\O</code>转换为换行符。</li>
</ol>
</li>
<li>
<p><code>puts</code>效率比<code>printf</code>高</p>
<ol>
<li><code>printf</code>函数会先对字符串进行格式化转换，然后才进行输出</li>
<li>比如以<code>\n</code>结尾的字符串</li>
</ol>
</li>
<li>
<p>如果打印一个换行符</p>
<ol>
<li>直接使用<code>putchar("\n");</code>效率更高</li>
</ol>
</li>
<li>
<p><code>gets</code>函数会造成数组越界的风险，需小心使用</p>
</li>
<li>最新标准C11已经抛弃了<code>gets</code>函数</li>
</ul>
            
          
        </div>
      </div>
    </div>
    <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
      <div class="sphinxsidebarwrapper">
        
  <p class="logo">
    <a href="..">
      <img class="logo" src="../logo.png" title="C Language Getting Started Guide">
    </a>
  </p>
  



        
          



<h3>Table Of Contents</h3>

<nav>
  
  
    <ul>
    
      <li><a href="#printf">格式输出函数printf()</a></li>
      <ul>
    
      <li><a href="#printf_1">printf()函数的使用</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#_2">输出格式说明</a></li>
      <ul>
    
  </ul>
    
      <li><a href="#_3">需要注意的地方</a></li>
      <ul>
    
  </ul>
    
  </ul>
    
      <li><a href="#scanf">格式输入函数scanf()</a></li>
      <ul>
    
      <li><a href="#_4">输出控制格式</a></li>
      <ul>
    
  </ul>
    
  </ul>
    
      <li><a href="#_5">字符输入输出函数</a></li>
      <ul>
    
      <li><a href="#_6">需要注意的地方</a></li>
      <ul>
    
  </ul>
    
  </ul>
    
      <li><a href="#_7">字符串输入输出函数</a></li>
      <ul>
    
      <li><a href="#printfio">与printf函数、字符I/O函数的比较</a></li>
      <ul>
    
  </ul>
    
  </ul>
    
  </ul>
  

  
    <hr>
    <ul>
      
        <li class="toctree-l1"><a href="https://github.com/anshengme/C-Language-Getting-Started-Guide">Fork me on GitHub</a></li>
      
    </ul>
  
</nav>
          
  <h3>Related Topics</h3>
  <ul>
    
      <li>Previous: <a href="../chapter-7/" title="previous chapter">
        第七章 运算符与表达式
      </a></li>
    
    
      <li>Next: <a href="../chapter-9/" title="next chapter">
        第九章 流程控制
      </a></li>
    
  </ul>

        
        <div id="searchbox" style="display: none;" role="search">
  <h3>Quick search</h3>
  <form class="search" action="../search.html" method="get">
    <input name="q" type="text">
    <input value="Go" type="submit">
  </form>
  <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
  </p>
</div>
<script type="text/javascript">
  document.getElementById("searchbox").style.display = "block";
</script>
      </div>
    </div>
    <div class="clearer"></div>
  </div>

  
    <div class="footer">
      
        &copy; 2017 ansheng
      
      
        |
        Powered by <a href="http://www.mkdocs.org">MkDocs 0.16.3</a>
        &amp; <a href="https://github.com/iamale/mkdocs-alabaster">Alabaster</a>
      
    </div>
  

  <!--
  MkDocs version      : 0.16.3
  Docs Build Date UTC : 2017-09-22 08:42:19
  -->
</body>
</html>